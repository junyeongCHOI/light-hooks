import UseAxiosExample from "../components/Hooks/UseAxiosExample";

<Meta title="Example/useAxios" component={UseAxiosExample} />

# useAxios

라이브러리 axios를 훅으로 사용합니다.

useAxios(url, initialState, config)

url = stringify

initialState = any

config = { preventOverlap?: boolean, reset?: boolean }

preventOverlap: default true 로딩이 끝나기 전 중복 호출을 차단합니다.

reset: default false 한 번 더 로딩할 경우 기존의 데이터를 initialState로 초기화합니다.

returns { get, post, data, error, isLoading }

config: axios configs

get(configs)

post(body, configs)

# Example

<UseAxiosExample />

# Code

```jsx
import { useState } from "react";
import { useAxios } from "light-hooks";
import styles from "../common.module.scss";

const baseUrl = "https://jsonplaceholder.typicode.com";

const UseAxiosExample = () => {
  const [title, setTitle] = useState("");
  const [body, setBody] = useState("");
  const [id, setId] = useState("");
  const { get: getPosts, data: allPosts, isLoading: isPostsLoading } = useAxios(
    `${baseUrl}/posts`
  );
  const posts = useAxios(`${baseUrl}/posts`, "");
  const userPosts = useAxios(`${baseUrl}/users/${id}/posts`, "");

  return (
    <>
      <div>
        <button className={styles.btn} onClick={() => getPosts()}>
          {isPostsLoading ? "loading..." : "get allPosts"}
        </button>
        <div
          style={{
            maxHeight: 480,
            overflow: "auto",
            display: "flex",
            flexWrap: "wrap",
          }}
        >
          {JSON.stringify(allPosts)}
        </div>
      </div>
      <div>
        <input
          className={styles.input}
          value={id}
          onChange={(e) => setId(e.target.value)}
          placeholder="user id"
        />
        <button className={styles.btn} onClick={() => userPosts.get()}>
          {userPosts.isLoading ? "loading..." : "get user posts"}
        </button>
        {<div>{JSON.stringify(userPosts.data)}</div>}
      </div>
      <div>
        <input
          className={styles.input}
          value={title}
          onChange={(e) => setTitle(e.target.value)}
          placeholder="title"
        />
        <input
          className={styles.input}
          value={body}
          onChange={(e) => setBody(e.target.value)}
          placeholder="body"
        />
        <button
          className={styles.btn}
          onClick={() => posts.post({ title, body })}
        >
          {posts.isLoading ? "loading..." : "post posts"}
        </button>
        {<div>{JSON.stringify(posts.data)}</div>}
      </div>
    </>
  );
};

export default UseAxiosExample;
```
